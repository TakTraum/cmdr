<UserControl x:Class="cmdr.Editor.Views.MappingListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:views="clr-namespace:cmdr.Editor.Views"        
             xmlns:behaviors="clr-namespace:cmdr.Editor.Behaviors"
             xmlns:controls="clr-namespace:cmdr.Editor.Views.Controls"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>
        <DataGrid Grid.Row="0" x:Name="MappingsGrid"
                  AutoGenerateColumns="False"
                  GridLinesVisibility="Horizontal"
                  ItemsSource="{Binding Mappings, Mode=OneWay}" 
                  CanUserSortColumns="True"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  SelectionMode="Extended"
                  SelectedItem="{Binding SelectedMapping}"
                  ScrollViewer.CanContentScroll="True"
                  ScrollViewer.HorizontalScrollBarVisibility="Hidden">
            <i:Interaction.Behaviors>
                <behaviors:DataGridScrollIntoViewBehavior/>
            </i:Interaction.Behaviors>
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <i:InvokeCommandAction Command="{Binding SelectItemsCommand, Mode=OneTime}" CommandParameter="{Binding Path=SelectedItems,ElementName=MappingsGrid}"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <DataGrid.InputBindings>
                <KeyBinding Key="C" Modifiers="Ctrl" Command="ApplicationCommands.NotACommand"/>
                <KeyBinding Key="L" Modifiers="Ctrl" Command="ApplicationCommands.NotACommand"/>
                <KeyBinding Key="Delete" Command="ApplicationCommands.NotACommand"/>
            </DataGrid.InputBindings>
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Id, Mode=OneTime}" Header="Id" IsReadOnly="True"></DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding Type, Mode=OneTime}" Header="I/O" IsReadOnly="True"></DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding TraktorCommand, Mode=OneWay}" Header="Command" Width="200" IsReadOnly="True"></DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding AssignmentExpression, Mode=OneWay}" Header="Assignment" Width="100" IsReadOnly="True"></DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding ConditionExpression, Mode=OneWay}" Header="Condition" Width="150" IsReadOnly="True"></DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding Interaction, Mode=OneWay}" Header="Interaction" Width="150" IsReadOnly="True"></DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding MappedTo, Mode=OneWay}" Header="Mapped To" Width="100" IsReadOnly="True"></DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding Comment}" Header="Comment" MinWidth="75" Width="*"></DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>

        <DockPanel Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Center">
            <DockPanel.Resources>
                <ResourceDictionary Source="../Styles/ContextMenuStyle.xaml"/>
            </DockPanel.Resources>
            <StackPanel Orientation="Horizontal">
                <Button Content="Add In" Command="{Binding ShowInCommandsCommand, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource Self}}" ContextMenu="{Binding InCommandsMenu, Mode=OneTime}"/>
                <Button Content="Add Out" Command="{Binding ShowOutCommandsCommand, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource Self}}" ContextMenu="{Binding OutCommandsMenu, Mode=OneTime}" Margin="10,0,0,0"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Show Conditions" Command="{Binding ShowConditionDescriptionsEditorCommand, Mode=OneTime}" Margin="0,0,10,0"/>
                <controls:SearchControl Width="100" DataContext="{Binding SearchViewModel, Mode=OneWay}" />
            </StackPanel>
        </DockPanel>

    </Grid>
</UserControl>
